#!/usr/bin/env python
# -*- coding: UTF-8 -*-

from datetime import date


def post_params(view_state, code='', fy='1999', fm='04', fd='01', start=None, upt='no'):
    if upt == 'no':
        year, month, day = str(date.today()).split('-')
    else:
        year, month, day = fy, fm, fd
    txt_today = str(date.today()).replace('-', '')
    start_params = {
        '__VIEWSTATE': view_state,
        '__VIEWSTATEENCRYPTED': '',
        'ctl00$txt_today': txt_today,
        'ctl00$hfStatus': 'ACM',
        'ctl00$hfAlert': '',
        'ctl00$txt_stock_code': code,
        'ctl00$txt_stock_name': '',
        'ctl00$rdo_SelectDocType': 'rbAll',
        'ctl00$sel_tier_1': '-2',
        'ctl00$sel_DocTypePrior2006': '-1',
        'ctl00$sel_tier_2_group': '-2',
        'ctl00$sel_tier_2': '-2',
        'ctl00$ddlTierTwo': '59,1,7',
        'ctl00$ddlTierTwoGroup': '2,1',
        'ctl00$txtKeyWord': '',
        'ctl00$rdo_SelectDateOfRelease': 'rbManualRange',
        'ctl00$sel_DateOfReleaseFrom_d': fd,
        'ctl00$sel_DateOfReleaseFrom_m': fm,
        'ctl00$sel_DateOfReleaseFrom_y': fy,
        'ctl00$sel_DateOfReleaseTo_d': day,
        'ctl00$sel_DateOfReleaseTo_m': month,
        'ctl00$sel_DateOfReleaseTo_y': year,
        'ctl00$sel_defaultDateRange': 'SevenDays',
        'ctl00$rdo_SelectSortBy': 'rbDateTime'
    }

    params_next = {
        """__VIEWSTATE""": view_state,
        """__VIEWSTATEENCRYPTED""": '',
        """ctl00$gvMain$ctl01$btnNext.x""": '49',
        """ctl00$gvMain$ctl01$btnNext.y""": '4',
    }
    return start_params if start is None else params_next


# 这是需要补抓的公司代码和时间规则
# code: must string eg: len("00000") == 5, or is None, then crawl all items at date.
# date: int or string, eg: "0000-00-00", or is None, then crawl all items until today.

codes_date = [(u'01880', '2009-06-01'), (u'00548', '2009-04-02'), (u'03813', '2012-05-31'), (u'01176', '2014-12-29'), (u'01030', '2014-12-28'), (u'01192', '2012-08-28'), (u'00728', '2009-11-02'), (u'01393', '2008-05-23'), (u'00658', '2008-05-28'), (u'01053', '2014-12-28'), (u'00290', '2010-03-04'), (u'00355', '2012-05-31'), (u'00486', '2014-12-29'), (u'00011', '2011-02-28'), (u'01918', '2014-12-29'), (u'01893', '2014-12-28'), (u'00157', '2009-11-02'), (u'01265', '2012-03-30'), (u'01057', '2014-12-28'), (u'00227', '2014-12-28'), (u'00694', '2005-04-01'), (u'01057', '2014-12-28'), (u'01803', '2014-12-29'), (u'02318', '2014-12-29'), (u'00104', '2009-04-02'), (u'00317', '2014-12-28'), (u'01088', '2014-12-28'), (u'01130', '2010-03-04'), (u'00580', '2012-10-15'), (u'01638', '2014-12-28'), (u'00770', '2012-10-15'), (u'02700', '2007-07-16'), (u'02223', '2014-09-10'), (u'01160', '2013-10-22'), (u'00887', '2012-08-28'), (u'00805', '2015-05-19'), (u'03993', '2014-12-28'), (u'00989', '2009-11-02'), (u'02331', '2012-10-15'), (u'01053', '2014-05-26'), (u'08047', '2009-11-02'), (u'08351', '2012-11-28'), (u'08135', '2014-12-29'), (u'00805', '2014-12-29'), (u'01171', '2014-12-28'), (u'01057', '2014-12-28'), (u'01022', '2014-12-29'), (u'00992', '2012-05-31'), (u'00229', '2012-03-30'), (u'02727', '2014-12-28'), (u'01136', '2014-12-29'), (u'02866', '2014-03-31'), (u'00694', '2004-04-14'), (u'08272', '2014-07-30'), (u'00402', '2008-11-03'), (u'00674', '2011-06-30'), (u'08267', '2014-12-29'), (u'01035', '2014-12-29'), (u'02221', '2014-10-31'), (u'00181', '2012-11-28'), (u'03983', '2014-12-28'), (u'01160', '2012-10-09'), (u'03888', '2014-12-28'), (u'00196', '2008-05-28'), (u'00905', '2012-10-15'), (u'00107', '2009-04-02'), (u'06230', '2012-10-15'), (u'00102', '2014-05-26'), (u'02689', '2009-11-02'), (u'06881', '2014-12-28'), (u'01393', '2008-08-04'), (u'01396', '2014-12-29'), (u'00168', '2012-10-15'), (u'00022', '2009-11-02'), (u'00581', '2012-10-15'), (u'03998', '2009-11-02'), (u'00746', '2006-04-28'), (u'08325', '2014-12-28'), (u'08312', '2014-12-28'), (u'03898', '2014-12-28'), (u'00145', '2011-09-30'), (u'02198', '2014-12-29'), (u'00057', '2007-12-13'), (u'01816', '2014-12-29'), (u'00563', '2011-09-30'), (u'02221', '2014-09-04'), (u'01142', '2011-09-30'), (u'01142', '2012-11-28'), (u'08003', '2011-06-30'), (u'08007', '2013-05-08'), (u'08325', '2014-12-28'), (u'02727', '2012-10-15'), (u'01169', '2014-03-20'), (u'02223', '2014-06-04'), (u'00628', '2011-04-04'), (u'01234', '2009-11-02'), (u'01169', '2013-12-04'), (u'06837', '2013-10-23'), (u'00989', '2010-06-01'), (u'00060', '2009-04-02'), (u'06030', '2014-12-28'), (u'03308', '2014-12-29'), (u'02088', '2013-05-08'), (u'00382', '2009-11-02'), (u'00569', '2011-06-30'), (u'01478', '2014-12-29'), (u'01893', '2014-12-28'), (u'01164', '2012-10-15'), (u'01057', '2014-12-28'), (u'01613', '2012-03-30'), (u'08047', '2010-06-01'), (u'00210', '2012-03-30'), (u'01057', '2014-12-28'), (u'00317', '2014-12-28'), (u'02628', '2014-01-16'), (u'00694', '2004-09-01'), (u'00428', '2012-10-15'), (u'01638', '2014-12-29'), (u'00404', '2012-03-30'), (u'00460', '2014-12-29'), (u'01766', '2012-10-15'), (u'01169', '2014-06-09'), (u'08267', '2014-12-29'), (u'00800', '2009-04-02'), (u'00535', '2014-12-28'), (u'01396', '2014-12-29'), (u'08168', '2014-05-05'), (u'00973', '2012-03-30'), (u'01057', '2014-12-28'), (u'00913', '2008-05-28'), (u'01057', '2014-12-28'), (u'02318', '2014-12-29'), (u'01057', '2014-12-28'), (u'01913', '2012-10-15'), (u'01766', '2014-12-28'), (u'02223', '2014-04-17'), (u'01088', '2009-04-02'), (u'08295', '2012-10-15'), (u'06199', '2014-12-28'), (u'08250', '2009-11-02'), (u'01057', '2014-12-28'), (u'01919', '2014-01-16'), (u'00205', '2009-11-02'), (u'01053', '2014-12-28'), (u'08317', '2015-09-09'), (u'01628', '2014-05-26'), (u'02727', '2012-10-15'), (u'08325', '2014-12-28'), (u'00311', '2012-08-28'), (u'02198', '2014-12-29'), (u'01638', '2014-12-29'), (u'02312', '2012-10-15'), (u'00766', '2014-05-26'), (u'01988', '2014-12-28'), (u'02198', '2014-12-29'), (u'00173', '2009-11-02'), (u'01812', '2014-12-29'), (u'01862', '2014-12-28')]

